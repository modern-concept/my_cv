<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CV — Danillo Xavier</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --a4w: 210mm;
      --a4h: 297mm;

      /* EXACT divisions (match mock) */
      --doodle-h: 20%;
      --tools-h: 30%;
      /* right column: give more room to Education */
      --edu-h: 54%;

      /* column widths (center narrower) */
      --col-mid: 0.70fr;

      /* padding geral do miolo */
      --pad: 6mm;
      /* padding mínimo dos blocos laterais */
      --pad-side: 4mm;
      --gap: 6mm;

      /* theme */
      --bg: #0f141a;
      --side: #111820;
      /* painel central (referência: dark, não branco) */
      --mid: #151A20;
      --midText: #E9EEF3;
      --midMuted: rgba(233,238,243,0.80);
      --accent: #4E86A8;

      --midLine: rgba(255,255,255,0.22);

      --fs-section: 14pt;
      --fs-name: 18pt;
      --fs-small: 8.5pt;
      --lh: 1.25;

      /* debug guides (like your image) */
      --guide-on: 0;
      --guide-green: rgba(0, 200, 0, .55);
      --guide-orange: rgba(255, 140, 0, .65);
      --guide-blue: rgba(45, 114, 160, .65);

      /* doodle zoom (avoid touching behind mid panel without changing height) */
      --doodle-zoom-left: 140%;
      --doodle-zoom-right: 140%;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background: var(--bg);
      display:flex;
      justify-content:center;
      padding:16px;
      font-family: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .page{
      width: var(--a4w);
      height: var(--a4h);
      background: var(--bg);
      position:relative;
      overflow:hidden;
      border-radius: 8px;
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
    }

    .topbar{
      position:absolute;
      right:8mm;
      top:8mm;
      display:flex;
      gap:6px;
      z-index:50;
    }
    .btn{
      border:1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.25);
      color: #fff;
      padding:6px 9px;
      border-radius: 10px;
      font: 700 9.5pt "Montserrat", sans-serif;
      cursor:pointer;
      backdrop-filter: blur(4px);
    }
    .btn:hover{ border-color: rgba(255,255,255,.35); }

    /* 3-column layout */
    .grid{
      position:absolute;
      inset:0;
      display:grid;
      grid-template-columns: 1fr var(--col-mid) 1fr;
    }

    .side{
      background: var(--side);
      position:relative;
      padding: 0;
      color:#E9EEF3;
    }

    .mid{
      background: var(--mid);
      color: var(--midText);
      position:relative;
      padding: var(--pad);
      border-left: 0;
      border-right: 0;
    }

    /* DOODLE slots (top 30% in each side column) */
    .doodle-slot{
      position:absolute;
      top:0;
      left:0;
      right:0;
      height: var(--doodle-h);
      width: auto;
      border: 0;
      background-repeat: no-repeat;
      background-size: var(--doodle-zoom-left) auto;
      background-position: center top;
      opacity: .30;
      pointer-events:none;
    }

    #doodleLeft{ background-position: left top; background-size: var(--doodle-zoom-left) auto; }
    #doodleRight{ background-position: right top; background-size: var(--doodle-zoom-right) auto; }

    .side-body{
      position:absolute;
      left: var(--pad-side);
      right: var(--pad-side);
      bottom: var(--pad-side);
      top: var(--doodle-h);

      display:flex;
      flex-direction:column;
      gap: 3mm;
    }

    /* right column: let Skills touch the page bottom */
    #rightCol .side-body{ bottom: 0; }

    /* Sections */
    .section{
      position:relative;
      padding: 3mm;
      overflow:hidden;
      border: 0;
    }

    .section-head{
      display:flex;
      flex-direction:column;
      gap: 2mm;
      margin: 0 0 3mm 0;
    }
    .section-head .rule{
      border-top: 1px dotted rgba(255,255,255,0.22);
      opacity:.95;
    }
    .section-title{
      margin:0;
      text-align:center;
      font: 800 var(--fs-section) "Montserrat", sans-serif;
      letter-spacing: 3px;
      text-transform:uppercase;
      color: #E9EEF3;
    }

    /* mid section head lines */
    .mid .section-head .rule{
      border-top-color: var(--midLine);
    }

    /* Experience content right-aligned (as reference) */
    #secExp{ text-align:right; }
    #secExp .date,
    #secExp .company,
    #secExp .role,
    #secExp .text,
    #secExp .muted{ text-align:right; }
    #secExp ul.bullets{
      padding-left: 0;
      padding-right: 4.2mm;
      list-style-position: inside;
      text-align:right;
    }

    /* Avoid overlap: let content define height; push last blocks to bottom */
    #secTools{
      margin-top:auto;
    }
    #secSkills{
      margin-top:auto;
    }

    /* mid panel (single column) */
    .mid-inner{
      height: 100%;
      display:flex;
      flex-direction:column;
      gap: 4mm;
    }

    /* Center panel centered text (as reference) */
    .mid{ text-align:center; }
    .mid .summary{ text-align:center; }

    .avatar{
      width: 50mm;
      height: auto;
      border-radius: 0;
      overflow: visible;
      border: 0;
      align-self:center;
      background: transparent;
    }
    .avatar img{ width:100%; height:auto; object-fit:contain; display:block; }

    .name{
      margin:0;
      text-align:center;
      font: 800 var(--fs-name) "Montserrat", sans-serif;
      letter-spacing: .5px;
      text-transform:uppercase;
    }
    .headline{
      text-align:center;
      font: 700 10pt "Montserrat", sans-serif;
      color: var(--midMuted);
      white-space:pre-line;
      margin-top: 1.5mm;
    }

    .mid .section-title{
      font: 800 11pt "Montserrat", sans-serif;
      letter-spacing: 3px;
      color: rgba(233,238,243,0.92);
    }

    .summary{
      font-size: var(--fs-small);
      line-height: var(--lh);
      color: rgba(233,238,243,0.82);
    }
    .summary p{ margin:0 0 2.6mm 0; }

    .contact{
      border-top: 1px dotted var(--midLine);
      padding-top: 3mm;
      display:flex;
      flex-direction:column;
      gap: 2.2mm;
    }
    .kv{ text-align:center; }
    .kv .k{
      font: 800 9pt "Montserrat", sans-serif;
      letter-spacing: .6px;
      text-transform:uppercase;
      margin-bottom: .5mm;
      color: rgba(233,238,243,0.78);
    }
    .kv .v{
      font: 700 9pt "Open Sans", sans-serif;
      color: var(--accent);
      white-space:pre-line;
      line-height:1.15;
    }

    .social{
      margin-top:auto;
      border-top: 1px dotted var(--midLine);
      padding-top: 3mm;
      display:flex;
      justify-content:center;
      gap: 8mm;
      flex-wrap:wrap;
      font: 700 9pt "Open Sans", sans-serif;
      color: rgba(233,238,243,0.70);
    }

    .pill{ display:flex; align-items:center; gap:2mm; }
    .icon{
      width: 8mm;
      height: 8mm;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.35);
      display:grid;
      place-items:center;
      font: 800 8pt "Montserrat", sans-serif;
    }

    /* text blocks (side) */
    .entry{ margin-bottom: 5mm; }
    .date{
      font: 800 7.8pt "Montserrat", sans-serif;
      color: rgba(255,255,255,.55);
      letter-spacing:.6px;
      text-transform:uppercase;
      margin-bottom:1.5mm;
      white-space:nowrap;
    }
    .company{
      font: 800 11pt "Montserrat", sans-serif;
      color: var(--accent);
      letter-spacing: .4px;
      text-transform:uppercase;
      white-space:pre-line;
      line-height:1.05;
      margin:0 0 1mm 0;
    }
    .role{
      font: 800 9pt "Montserrat", sans-serif;
      color: #E9EEF3;
      text-transform:uppercase;
      letter-spacing:.4px;
      white-space:pre-line;
      margin:0 0 2.2mm 0;
    }
    ul.bullets{
      margin: 2mm 0 0 0;
      padding-left: 4.2mm;
      color: rgba(255,255,255,.86);
      font-size: var(--fs-small);
      line-height: var(--lh);
    }
    ul.bullets li{ margin: 0 0 1.6mm 0; }
    .text{
      font-size: var(--fs-small);
      line-height: var(--lh);
      color: rgba(255,255,255,.86);
      margin:0;
    }
    .muted{
      color: rgba(255,255,255,.72);
      font-size: var(--fs-small);
      line-height: var(--lh);
    }

    /* ratings */
    .rating-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:4mm;
      margin: 2.2mm 0;
    }
    .rating-row .label{
      font: 700 var(--fs-small) "Open Sans", sans-serif;
      color: rgba(255,255,255,.90);
      flex: 1 1 auto;
      min-width:0;
    }
    .hexes{ display:flex; gap:1.1mm; flex: 0 0 auto; }
    .hx{
      width:4.6mm; height:4.6mm;
      clip-path: polygon(25% 6.7%, 75% 6.7%, 100% 50%, 75% 93.3%, 25% 93.3%, 0% 50%);
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.12);
    }
    .hx.on{ background: rgba(78,134,168,.9); border-color: rgba(78,134,168,.9); }

    /* print */
    @page{ size: A4 portrait; margin: 0; }
    @media print{
      body{ padding:0; background:white; }
      .page{ box-shadow:none; border-radius:0; }
      .topbar{ display:none !important; }
      .page{ -webkit-print-color-adjust: exact; print-color-adjust: exact; }

      /* disable guides on print */
      :root{ --guide-on: 0; }
    }
  </style>
</head>
<body>
  <div class="page" id="page">
    <div class="topbar">
      <button class="btn" id="langBtn">PT</button>
      <button class="btn" id="printBtn">Imprimir / PDF</button>
    </div>

    <div class="grid">
      <!-- LEFT COLUMN -->
      <aside class="side" id="leftCol">
        <div class="doodle-slot" id="doodleLeft"></div>

        <div class="side-body">
          <section class="section" id="secExp">
            <div class="section-head">
              <div class="rule"></div>
              <h2 class="section-title" id="tExp">EXPERIÊNCIA</h2>
              <div class="rule"></div>
            </div>
            <div id="experience"></div>
          </section>

          <section class="section" id="secTools">
            <div class="section-head">
              <div class="rule"></div>
              <h2 class="section-title" id="tTools">FERRAMENTAS</h2>
              <div class="rule"></div>
            </div>
            <div id="tools"></div>
          </section>
        </div>
      </aside>

      <!-- MIDDLE PANEL -->
      <main class="mid" id="midCol">
        <div class="mid-inner">
          <div class="avatar"><img id="avatar" alt="avatar" /></div>
          <div>
            <h1 class="name" id="name"></h1>
            <div class="headline" id="headline"></div>
          </div>

          <div class="summary" id="summary"></div>

          <div class="section-head">
            <div class="rule"></div>
            <div class="section-title" id="tContact">CONTATO</div>
            <div class="rule"></div>
          </div>
          <div class="contact" id="contact"></div>

          <div class="social" id="social"></div>
        </div>
      </main>

      <!-- RIGHT COLUMN -->
      <aside class="side" id="rightCol">
        <div class="doodle-slot" id="doodleRight"></div>

        <div class="side-body">
          <section class="section" id="secEdu">
            <div class="section-head">
              <div class="rule"></div>
              <h2 class="section-title" id="tEdu">FORMAÇÃO</h2>
              <div class="rule"></div>
            </div>
            <div id="education"></div>
          </section>

          <section class="section" id="secSkills">
            <div class="section-head">
              <div class="rule"></div>
              <h2 class="section-title" id="tSkills">HABILIDADES</h2>
              <div class="rule"></div>
            </div>
            <div id="skills"></div>
          </section>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const DATA_URL = "cv-data.json";
    const $ = (id) => document.getElementById(id);

    function el(tag, cls, text){
      const n = document.createElement(tag);
      if(cls) n.className = cls;
      if(text !== undefined) n.textContent = text;
      return n;
    }

    function hexRow(level, max=5){
      const wrap = document.createElement("div");
      wrap.className = "hexes";
      for(let i=1;i<=max;i++){
        const h = document.createElement("span");
        h.className = "hx" + (i<=level ? " on":"");
        wrap.appendChild(h);
      }
      return wrap;
    }

    function render(data, lang){
      const L = data.languages[lang];
      const labels = L.labels;

      // buttons
      $("langBtn").textContent = (lang === "pt") ? "PT" : "EN";
      $("printBtn").textContent = labels.printPdf;

      // titles
      $("tExp").textContent = labels.experience;
      $("tTools").textContent = labels.tools;
      $("tContact").textContent = labels.contact;
      $("tEdu").textContent = labels.education;
      $("tSkills").textContent = labels.skills;

      // header
      $("avatar").src = "avatar.png";
      $("name").textContent = L.profile.name;
      $("headline").textContent = L.profile.headline;

      const summary = $("summary");
      summary.innerHTML = "";
      (L.profile.summary || []).forEach(p => {
        const para = document.createElement("p");
        // Bold label "Curiosidades:" / "Curiosities:" when present
        const m = String(p).match(/^\s*(Curiosidades|Curiosities)\s*:\s*(.*)$/i);
        if(m){
          const strong = document.createElement("strong");
          strong.textContent = m[1] + ": ";
          para.appendChild(strong);
          para.appendChild(document.createTextNode(m[2]));
        }else{
          para.textContent = p;
        }
        summary.appendChild(para);
      });

      // doodles (no margins; files: Doodles.png = right, Doodle Left.png = left)
      const dl = $("doodleLeft");
      dl.style.backgroundImage = (data.assets && data.assets.bgLeft)
        ? `url("${data.assets.bgLeft}")`
        : "none";

      const dr = $("doodleRight");
      dr.style.backgroundImage = (data.assets && (data.assets.bgRight || data.assets.bgDoodles))
        ? `url("${data.assets.bgRight || data.assets.bgDoodles}")`
        : "none";

      // experience
      const exp = $("experience");
      exp.innerHTML = "";
      (L.experience || []).forEach(x => {
        const wrap = el("div", "entry");
        wrap.appendChild(el("div", "date", `${x.from}  —  ${x.to}`));

        const company = el("div", "company");
        company.textContent = x.company;
        wrap.appendChild(company);

        const role = el("div", "role");
        role.textContent = x.role;
        wrap.appendChild(role);

        if(x.bullets && x.bullets.length){
          const ul = el("ul", "bullets");
          x.bullets.forEach(b => ul.appendChild(el("li", null, b)));
          wrap.appendChild(ul);
        }

        if(x.paragraphs && x.paragraphs.length){
          x.paragraphs.forEach(p => {
            const para = el("p", "text");
            para.textContent = p;
            para.style.marginTop = "2mm";
            wrap.appendChild(para);
          });
        }

        if(x.footer){
          const f = el("p", "muted");
          f.textContent = x.footer;
          f.style.marginTop = "2.6mm";
          wrap.appendChild(f);
        }

        exp.appendChild(wrap);
      });

      // tools
      const tools = $("tools");
      tools.innerHTML = "";
      (L.tools || []).forEach(t => {
        const row = el("div", "rating-row");
        row.appendChild(el("div", "label", t.name));
        row.appendChild(hexRow(t.level || 0));
        tools.appendChild(row);
      });

      // contact
      const c = $("contact");
      c.innerHTML = "";
      (L.contact.items || []).forEach(it => {
        const kv = el("div", "kv");
        kv.appendChild(el("div", "k", it.label));
        const v = el("div", "v");
        v.textContent = it.value;
        kv.appendChild(v);
        c.appendChild(kv);
      });

      // social
      const soc = $("social");
      soc.innerHTML = "";
      (L.contact.social || []).forEach(s => {
        const pill = el("div", "pill");
        pill.appendChild(el("div", "icon", (s.icon || "").toUpperCase().slice(0,2) || "•"));
        pill.appendChild(el("div", null, s.label));
        soc.appendChild(pill);
      });

      // education
      const edu = $("education");
      edu.innerHTML = "";
      (L.education || []).forEach(e => {
        const wrap = el("div", "entry");
        wrap.appendChild(el("div", "date", `${e.from}  —  ${e.to}`));

        const school = el("div", "company");
        school.textContent = e.school;
        wrap.appendChild(school);

        const degree = el("div", "role");
        degree.textContent = e.degree;
        wrap.appendChild(degree);

        if(e.details && e.details.length){
          const ul = el("ul", "bullets");
          e.details.forEach(d => ul.appendChild(el("li", null, d)));
          wrap.appendChild(ul);
        }

        edu.appendChild(wrap);
      });

      // skills
      const skills = $("skills");
      skills.innerHTML = "";
      (L.skills || []).forEach(t => {
        const row = el("div", "rating-row");
        row.appendChild(el("div", "label", t.name));
        row.appendChild(hexRow(t.level || 0));
        skills.appendChild(row);
      });
    }

    async function init(){
      const res = await fetch(DATA_URL, {cache:"no-store"});
      const data = await res.json();

      let lang = localStorage.getItem("cv_lang") || (data.meta && data.meta.defaultLang) || "pt";
      if(!data.languages[lang]) lang = "pt";

      render(data, lang);

      $("langBtn").addEventListener("click", () => {
        lang = (lang === "pt") ? "en" : "pt";
        localStorage.setItem("cv_lang", lang);
        render(data, lang);
      });

      $("printBtn").addEventListener("click", () => window.print());
    }

    init().catch(err => {
      console.error(err);
      alert("Erro ao carregar cv-data.json. Abra via servidor (ex: python -m http.server).\n\nDetalhes: " + err.message);
    });
  </script>
</body>
</html>
