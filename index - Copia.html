<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CV — Danillo Xavier</title>

  <!-- Approx fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --a4w: 210mm;
      --a4h: 297mm;

      /* tune to avoid overlap */
      --pad: 10mm;
      --reserve-tools: 78mm;
      --gap: 5mm;

      --fs-base: 9.5pt;      /* body */
      --fs-small: 8.25pt;    /* small */
      --fs-xs: 7.75pt;

      --fs-name: 26pt;       /* name */
      --fs-headline: 11.2pt; /* headline */
      --fs-section: 18pt;    /* section title */
      --fs-card-title: 12pt; /* company/school title */
      --fs-role: 10pt;

      --lh: 1.25;

      --accent: #4E86A8;
      --bg: #151A20;
      --panel: #1C222A;
      --text: #E9EEF3;
      --muted: #AAB7C4;
      --line: rgba(255,255,255,0.22);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:#0f141a;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:16px;
      color:var(--text);
      font-family: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* A4 fixed page */
    .page{
      width:var(--a4w);
      height:var(--a4h);
      background:var(--bg);
      position:relative;
      overflow:hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      border-radius: 6px;
    }

    /* background doodles */
    .bg-doodles{
      position:absolute;
      inset:0;
      background-repeat:no-repeat;
      background-size: cover;
      background-position: center top;
      opacity:.25;
      pointer-events:none;
      filter: contrast(105%) brightness(110%);
    }
    .bg-right{
      position:absolute;
      right:0;
      top:0;
      width:50%;
      height:30%;
      opacity:.22;
      pointer-events:none;
      z-index:2;
      filter: contrast(110%) brightness(110%);
      background-size: contain;
      background-repeat: no-repeat;
      background-position: right top;
      transform: scaleX(-1);
      transform-origin: center;
    }

    /* top controls */
    .topbar{
      position:absolute;
      right:8mm;
      top:8mm;
      display:flex;
      gap:6px;
      z-index:20;
    }
    .btn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.25);
      color: var(--text);
      padding:6px 9px;
      border-radius: 10px;
      font: 600 9.5pt "Montserrat", sans-serif;
      cursor:pointer;
      backdrop-filter: blur(4px);
    }
    .btn:hover{ border-color: rgba(255,255,255,.35); }

    /* header */
    .header{
      position:relative;
      height:72mm;
      padding: 10mm var(--pad) 0 var(--pad);
      z-index:5;
    }
    .header-inner{
      height:100%;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      text-align:center;
    }

    .hex-wrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:5mm;
    }
    .hex{
      width:48mm;
      height:48mm;
      clip-path: polygon(25% 6.7%, 75% 6.7%, 100% 50%, 75% 93.3%, 25% 93.3%, 0% 50%);
      border: 4px solid rgba(255,255,255,.95);
      background: rgba(255,255,255,.06);
      overflow:hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .hex img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .name{
      font: 800 var(--fs-name) "Montserrat", sans-serif;
      letter-spacing: .6px;
      line-height:1.0;
      text-transform:uppercase;
      margin:0;
    }
    .headline{
      margin-top:2mm;
      font: 600 var(--fs-headline) "Montserrat", sans-serif;
      opacity:.95;
      white-space:pre-line;
    }

    .summary{
      margin: 5mm auto 0 auto;
      width: 170mm;
      font-size: var(--fs-small);
      line-height: var(--lh);
      color: var(--muted);
    }
    .summary p{ margin:0 0 2.6mm 0; }

    /* main 3 columns */
    .main{
      position:relative;
      z-index:6;
      padding: 0 var(--pad) var(--pad) var(--pad);
      height: calc(var(--a4h) - 72mm);
      display:grid;
      grid-template-columns: 1fr 0.92fr 1fr;
      gap: var(--gap);
      align-content:start;
    }

    /* reserve space for bottom tools block (avoid overlap) */
    #colExp{ position:relative; padding-bottom: var(--reserve-tools); }
    #toolsBlock{ position:absolute; left:var(--pad); right:auto; bottom:8mm; width: calc((var(--a4w) - 2*var(--pad) - 2*var(--gap)) * (1/ (1 + 0.92 + 1)) ); max-width: 64mm; }


    .section-title{
      font: 700 var(--fs-section) "Montserrat", sans-serif;
      letter-spacing: 3px;
      text-transform:uppercase;
      color: var(--text);
      margin: 0 0 3mm 0;
    }
    .section-rule{
      border-top: 1px dotted var(--line);
      margin: 2mm 0 4mm 0;
      opacity:.95;
    }

    .col{ min-width:0; }
    .card{
      background: transparent;
      padding: 0;
      margin:0 0 6mm 0;
    }

    .block{
      background: transparent;
      border: 0;
      padding:0;
    }

    .entry{
      margin-bottom: 6mm;
    }

    .date{
      font: 700 var(--fs-xs) "Montserrat", sans-serif;
      color: rgba(255,255,255,.55);
      letter-spacing:.6px;
      text-transform:uppercase;
      margin-bottom:1.5mm;
      white-space:nowrap;
    }

    .company{
      font: 800 var(--fs-card-title) "Montserrat", sans-serif;
      color: var(--accent);
      letter-spacing: .4px;
      text-transform:uppercase;
      white-space:pre-line;
      line-height:1.05;
      margin:0 0 1mm 0;
    }

    .role{
      font: 800 var(--fs-role) "Montserrat", sans-serif;
      color: var(--text);
      text-transform:uppercase;
      letter-spacing:.4px;
      white-space:pre-line;
      margin:0 0 2.2mm 0;
    }

    .text{
      font-size: var(--fs-small);
      line-height: var(--lh);
      color: rgba(255,255,255,.82);
      margin:0;
    }
    .muted{
      color: var(--muted);
      font-size: var(--fs-small);
      line-height: var(--lh);
    }
    ul.bullets{
      margin: 2.2mm 0 0 0;
      padding-left: 4.2mm;
      color: rgba(255,255,255,.82);
      font-size: var(--fs-small);
      line-height: var(--lh);
    }
    ul.bullets li{ margin: 0 0 1.6mm 0; }

    /* middle contact */
    .contact-grid{
      display:flex;
      flex-direction:column;
      gap: 2.6mm;
      margin-top: 1mm;
    }
    .kv .k{
      font: 800 10pt "Montserrat", sans-serif;
      text-transform:uppercase;
      letter-spacing:.6px;
      margin-bottom:.6mm;
      text-align:center;
    }
    .kv .v{
      font: 600 var(--fs-small) "Open Sans", sans-serif;
      color: var(--accent);
      white-space:pre-line;
      text-align:center;
      line-height: 1.22;
    }

    /* bottom socials */
    .social{
      position:absolute;
      left: var(--pad);
      right: var(--pad);
      bottom: 8mm;
      display:flex;
      justify-content:center;
      gap: 14mm;
      align-items:center;
      z-index:10;
      color: rgba(255,255,255,.75);
      font: 600 var(--fs-small) "Open Sans", sans-serif;
    }
    .social .pill{
      display:flex;
      align-items:center;
      gap: 3mm;
      opacity:.9;
    }
    .social .icon{
      width:10mm; height:10mm;
      border: 1px solid rgba(255,255,255,.55);
      border-radius: 50%;
      display:grid;
      place-items:center;
      font: 800 9pt "Montserrat", sans-serif;
      color: rgba(255,255,255,.85);
    }

    /* tools/skills rating (hex) */
    .rating-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:4mm;
      margin: 2.4mm 0;
    }
    .rating-row .label{
      font: 600 var(--fs-small) "Open Sans", sans-serif;
      color: rgba(255,255,255,.86);
      flex: 1 1 auto;
      min-width:0;
    }
    .hexes{
      display:flex;
      gap:1.1mm;
      flex: 0 0 auto;
    }
    .hx{
      width:4.6mm; height:4.6mm;
      clip-path: polygon(25% 6.7%, 75% 6.7%, 100% 50%, 75% 93.3%, 25% 93.3%, 0% 50%);
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.12);
    }
    .hx.on{
      background: rgba(78,134,168,.9);
      border-color: rgba(78,134,168,.9);
    }

    /* footer section spacing to fit */
    .stack-tight .entry{ margin-bottom: 4.5mm; }

    /* print */
    @page{
      size: A4 portrait;
      margin: 0;
    }
    @media print{
      body{ padding:0; background:white; }
      .page{ box-shadow:none; border-radius:0; }
      .topbar{ display:none !important; }
      .page{ -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
</head>
<body>
  <div class="page" id="page">
    <div class="bg-doodles" id="bgDoodles"></div>
    <div class="bg-right" id="bgRight"></div>

    <div class="topbar">
      <button class="btn" id="langBtn">PT</button>
      <button class="btn" id="printBtn">Imprimir / PDF</button>
    </div>

    <header class="header">
      <div class="header-inner">
        <div class="hex-wrap">
          <div class="hex">
            <img id="avatar" alt="avatar" />
          </div>
          <div>
            <h1 class="name" id="name"></h1>
            <div class="headline" id="headline"></div>
          </div>
        </div>
      </div>

      <div class="summary" id="summary"></div>
    </header>

    <main class="main">
      <section class="col" id="colExp">
        <h2 class="section-title" id="tExp"></h2>
        <div class="section-rule"></div>
        <div id="experience"></div>

        <div id="toolsBlock">
          <h2 class="section-title" id="tTools" style="margin-top:0;"></h2>
          <div class="section-rule"></div>
          <div id="tools"></div>
        </div>
      </section>

      <section class="col" id="colMid">
        <h2 class="section-title" id="tContact"></h2>
        <div class="section-rule"></div>
        <div class="contact-grid" id="contact"></div>

        <div style="position:absolute; left: calc(var(--pad) + (100% + var(--gap))*1 );"></div>
      </section>

      <section class="col stack-tight" id="colEdu">
        <h2 class="section-title" id="tEdu"></h2>
        <div class="section-rule"></div>
        <div id="education"></div>

        <h2 class="section-title" id="tCert" style="margin-top:6mm;"></h2>
        <div class="section-rule"></div>
        <div id="certifications"></div>

        <h2 class="section-title" id="tSkills" style="margin-top:6mm;"></h2>
        <div class="section-rule"></div>
        <div id="skills"></div>
      </section>
    </main>

    <div class="social" id="social"></div>
  </div>

<script>
  const DATA_URL = "cv-data.json";

  const $ = (id) => document.getElementById(id);

  function hexRow(level, max=5){
    const wrap = document.createElement("div");
    wrap.className = "hexes";
    for(let i=1;i<=max;i++){
      const h = document.createElement("span");
      h.className = "hx" + (i<=level ? " on":"");
      wrap.appendChild(h);
    }
    return wrap;
  }

  function el(tag, cls, text){
    const n = document.createElement(tag);
    if(cls) n.className = cls;
    if(text !== undefined) n.textContent = text;
    return n;
  }

  function render(data, lang){
    const L = data.languages[lang];
    const labels = L.labels;

    // assets + theme
    $("avatar").src = data.assets.avatar || "avatar.png";
    const bgRight = $("bgRight");
    bgRight.style.backgroundImage = `url("${data.assets.bgRight || data.assets.bgLeft || "Doodle Left.png"}")`;
    const bg = $("bgDoodles");
    bg.style.backgroundImage = `url("${data.assets.bgDoodles || "Doodles.png"}")`;

    // top labels
    $("printBtn").textContent = labels.printPdf;
    $("langBtn").textContent = (lang === "pt") ? "PT" : "EN";

    // header
    $("name").textContent = L.profile.name;
    $("headline").textContent = L.profile.headline;
    const s = $("summary");
    s.innerHTML = "";
    (L.profile.summary || []).forEach(p => s.appendChild(el("p", null, p)));

    // section titles
    $("tExp").textContent = labels.experience;
    $("tContact").textContent = labels.contact;
    $("tEdu").textContent = labels.education;
    $("tTools").textContent = labels.tools;
    $("tSkills").textContent = labels.skills;
    $("tCert").textContent = labels.certifications;

    // experience
    const exp = $("experience");
    exp.innerHTML = "";
    (L.experience || []).forEach(x => {
      const wrap = el("div","entry");
      const date = el("div","date", `${x.from}  —  ${x.to}`);
      const company = el("div","company"); company.textContent = x.company;
      const role = el("div","role"); role.textContent = x.role;

      wrap.appendChild(date);
      wrap.appendChild(company);
      wrap.appendChild(role);

      if(x.bullets && x.bullets.length){
        const ul = el("ul","bullets");
        x.bullets.forEach(b => ul.appendChild(el("li",null,b)));
        wrap.appendChild(ul);
      }
      if(x.paragraphs && x.paragraphs.length){
        x.paragraphs.forEach(p => {
          const para = el("p","text"); para.textContent = p;
          para.style.marginTop = "2mm";
          wrap.appendChild(para);
        });
      }
      if(x.footer){
        const f = el("p","muted"); f.textContent = x.footer;
        f.style.marginTop = "2.6mm";
        wrap.appendChild(f);
      }
      exp.appendChild(wrap);
    });

    // contact
    const c = $("contact");
    c.innerHTML = "";
    (L.contact.items || []).forEach(it => {
      const kv = el("div","kv");
      kv.appendChild(el("div","k", it.label));
      const v = el("div","v"); v.textContent = it.value;
      kv.appendChild(v);
      c.appendChild(kv);
    });

    // education
    const edu = $("education");
    edu.innerHTML = "";
    (L.education || []).forEach(e => {
      const wrap = el("div","entry");
      wrap.appendChild(el("div","date", `${e.from}  —  ${e.to}`));
      const school = el("div","company"); school.textContent = e.school;
      const degree = el("div","role"); degree.textContent = e.degree;
      wrap.appendChild(school);
      wrap.appendChild(degree);
      if(e.details && e.details.length){
        const ul = el("ul","bullets");
        e.details.forEach(d => ul.appendChild(el("li",null,d)));
        wrap.appendChild(ul);
      }
      edu.appendChild(wrap);
    });

    // certifications
    const cert = $("certifications");
    cert.innerHTML = "";
    (L.certifications || []).forEach(ca => {
      const wrap = el("div","entry");
      wrap.appendChild(el("div","company", ca.issuer));
      wrap.appendChild(el("div","role", `${ca.name}`));
      wrap.appendChild(el("div","date", ca.year));
      cert.appendChild(wrap);
    });

    // tools
    const tools = $("tools");
    tools.innerHTML = "";
    (L.tools || []).forEach(t => {
      const row = el("div","rating-row");
      row.appendChild(el("div","label", t.name));
      row.appendChild(hexRow(t.level || 0));
      tools.appendChild(row);
    });

    // skills
    const skills = $("skills");
    skills.innerHTML = "";
    (L.skills || []).forEach(t => {
      const row = el("div","rating-row");
      row.appendChild(el("div","label", t.name));
      row.appendChild(hexRow(t.level || 0));
      skills.appendChild(row);
    });

    // social (bottom)
    const soc = $("social");
    soc.innerHTML = "";
    (L.contact.social || []).forEach(s => {
      const pill = el("div","pill");
      const ic = el("div","icon", (s.icon || "").toUpperCase().slice(0,2) || "•");
      pill.appendChild(ic);
      pill.appendChild(el("div",null,s.label));
      soc.appendChild(pill);
    });
  }

  async function init(){
    const res = await fetch(DATA_URL, {cache:"no-store"});
    const data = await res.json();

    let lang = localStorage.getItem("cv_lang") || data.meta.defaultLang || "pt";
    if(!data.languages[lang]) lang = "pt";

    render(data, lang);

    $("langBtn").addEventListener("click", () => {
      lang = (lang === "pt") ? "en" : "pt";
      localStorage.setItem("cv_lang", lang);
      render(data, lang);
    });

    $("printBtn").addEventListener("click", () => window.print());
  }

  init().catch(err => {
    console.error(err);
    alert("Erro ao carregar cv-data.json. Abra via servidor (ex: python -m http.server).");
  });
</script>
</body>
</html>
